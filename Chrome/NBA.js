function NBA(){Sports.call(this),this.datakey="NBA_DATA",this.today,this.schedule_url="http://data.nba.com/json/cms/noseason/scoreboard/"+this.yyyymmdd()+"/games.json",this.$game_table=$("#NBA-panel #NBA_game_table"),this.$game_template=$("#NBA-schedule-template").html(),this.updateGamesID,this.rowId="#NBA_col",this.autoUpdateButtonId=this.rowId+" #autoupdate-btn"}NBA.prototype=Object.create(Sports.prototype),NBA.prototype.constructor=NBA,NBA.prototype.off=function(){console.log("nba off"),this.turnOffAutoUpdate()},NBA.prototype.yyyymmdd=function(t){function e(t){return 10>t?"0"+t:""+t}return t?this.today.setDate(this.today.getDate()+t):this.today=new Date,this.today.getFullYear()+e(this.today.getMonth()+1)+e(this.today.getDate())},NBA.prototype.cacheButtonActions=function(){var t=this;$("body").on("click","#NBA_game_table #remove-game-btn",{that:t},this.removeGame),$("body").on("click","#NBA_col #reset_games",this.resetSchedule.bind(this)),$("body").on("click","#NBA_col #update-btn",this.updateSchedule.bind(this)),$("body").on("click","#NBA_col #autoupdate-btn",{that:t},this.autoupdateSchedule),$("body").on("click","#NBA_col #standings-btn",this.standings.bind(this)),$("body").on("click","#NBA_col #tomorrow-btn",this.tomorrowSchedule.bind(this)),$("body").on("click","#NBA_col #yesterday-btn",this.yesterdaySchedule.bind(this)),$("body").on("click","#NBA_col #today-btn",this.todaySchedule.bind(this))},NBA.prototype.removeGame=function(t){var e=t.data.that,s=$(this).closest("tr").attr("id");for($("#"+s).remove(),$("#c"+s).remove(),i=0;i<e.data.sports_content.games.game.length;i++)if(s==e.data.sports_content.games.game[i].id){e.data.sports_content.games.game[i].hidden=!0;break}e.saveData()},NBA.prototype.dataOutOfDate=function(t){return null==this.data||null==this.data.sports_content?!0:t.sports_content.games.game[0]?!(t.sports_content.games.game[0].date===this.yyyymmdd()):!0},NBA.prototype.massageData=function(t,e){for(i=0;i<t.sports_content.games.game.length;i++){var s=parseInt(t.sports_content.games.game[i].home.score),a=parseInt(t.sports_content.games.game[i].visitor.score);t.sports_content.games.game[i].home.winning=s>a,t.sports_content.games.game[i].visitor.winning=a>s;var o=t.sports_content.games.game[i];if(this.data&&this.data.sports_content&&this.data.sports_content.games.game[i]&&t.sports_content.games.game[i].id==this.data.sports_content.games.game[i].id){var n,r=this.data.sports_content.games.game[i];n=""===o.home.score?!0:parseInt(o.home.score)+parseInt(o.visitor.score)==parseInt(r.home.score)+parseInt(r.visitor.score),t.sports_content.games.game[i].highlight=!n}try{if("1"===t.sports_content.games.game[i].period_time.game_status){var d=parseInt(t.sports_content.games.game[i].time.substring(0,2)),c=parseInt(t.sports_content.games.game[i].time.substring(2,4)),m=parseInt(t.sports_content.games.game[i].date.substring(0,4)),g=parseInt(t.sports_content.games.game[i].date.substring(4,6)),p=parseInt(t.sports_content.games.game[i].date.substring(6,8)),h=new Date(m,g,p);d-=1;var l=5;h.setUTCHours((d+l)%24,c);var u=h.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});t.sports_content.games.game[i].period_time.period_status=u}}catch(_){console.log(_)}("Final"===t.sports_content.games.game[i].period_time.period_status||"Halftime"===t.sports_content.games.game[i].period_time.period_status||t.sports_content.games.game[i].period_time.period_status.includes("Start")||t.sports_content.games.game[i].period_time.period_status.includes("End"))&&(t.sports_content.games.game[i].period_time.game_clock="");var y=parseInt(t.sports_content.games.game[i].period_time.period_value),b=parseInt(t.sports_content.games.game[i].period_time.game_status);y>4&&3==b&&(t.sports_content.games.game[i].overtime=y-4);var f=t.sports_content.games.game[i],A=parseInt(f.period_time.period_value),B=f.period_time.game_clock;if(dev_env&&("GSW"!==f.visitor.abbreviation&&"GSW"!==f.home.abbreviation||(t.sports_content.games.game[i].fav_team=!0)),2==b&&A>3){var v=parseFloat(B.split(":")[0]);if(6>v||B.split(":").length<2){var N=parseInt(o.home.score)-parseInt(o.visitor.score);Math.abs(N)<6&&(t.sports_content.games.game[i].close_game=!0)}}}e.call(this,t)},NBA.prototype.writeToTemplate=function(){this.displayTemplate("NBAschedule","games",this.data.sports_content.games.game,$("#NBA_col"));var t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e=["January","February","March","April","May","June","July","August","September","October","November","December"];$("#NBA_col #today").html(t[this.today.getDay()]+" "+this.today.getDate()+", "+e[this.today.getMonth()])},NBA.prototype.updateEachGame=function(t){for(console.log("NBA updating"),i=0;i<this.data.sports_content.games.game.length;i++){if(this.data.sports_content.games.game[i].id!==t.sports_content.games.game[i].id){console.log("data not same -- error");break}this.data.sports_content.games.game[i].hidden&&!this.data.sports_content.games.game[i].close_game&&(t.sports_content.games.game[i].hidden=!0)}this.data=t,this.saveData(this.writeScheduleToDOM())},NBA.prototype.autoupdateSchedule=function(t){$(this).find("span").toggleClass("glyphicon-ok").toggleClass("glyphicon-remove"),$(this).toggleClass("btn-default").toggleClass("btn-success");var e=t.data.that;$(this).hasClass("btn-success")?(console.log("updating---"),e.continueAutoUpdate.bind(e),e.updateGamesID=window.setInterval(e.continueAutoUpdate.bind(e),1e4)):(console.log("clearing---"),window.clearInterval(e.updateGamesID))},NBA.prototype.continueAutoUpdate=function(){var t=!0;for(i=0;i<this.data.sports_content.games.game.length;i++)if("Final"!==this.data.sports_content.games.game[i].period_time.period_status){t=!1;break}t?this.turnOffAutoUpdate():this.getDataSchedule()},NBA.prototype.turnOffAutoUpdate=function(){if(console.log("clearing---"),window.clearInterval(this.updateGamesID),$(this.autoUpdateButtonId).hasClass("btn-success")){var t=$(this.autoUpdateButtonId);t.find("span").toggleClass("glyphicon-remove",!0),t.find("span").toggleClass("glyphicon-ok",!1),t.toggleClass("btn-success",!1),t.toggleClass("btn-default",!0)}},NBA.prototype.highlightGames=function(){for(i=0;i<this.data.sports_content.games.game.length;i++)if(this.data.sports_content.games.game[i].highlight){var t="#"+this.data.sports_content.games.game[i].id;$(t).effect("highlight",{color:"#FFFF99"},2e3),0==this.data.sports_content.games.game[i].highlight}},NBA.prototype.standings=function(){var t="http://data.nba.com/json/cms/2015/standings/conference.json";this.getData(t,this.showStandings)},NBA.prototype.showStandings=function(t){this.displayTemplate("NBAstandings","teams",t.sports_content.standings.conferences.West.team,$("#NBA-standings #West")),this.displayTemplate("NBAstandings","teams",t.sports_content.standings.conferences.East.team,$("#NBA-standings #East"));var e="border-bottom:3pt solid grey;";$($("#NBA-standings #West tr")[8]).attr("style",e),$($("#NBA-standings #East tr")[8]).attr("style",e)},NBA.prototype.tomorrowSchedule=function(t){this.schedule_url="http://data.nba.com/json/cms/noseason/scoreboard/"+this.yyyymmdd(1)+"/games.json",this.resetSchedule()},NBA.prototype.todaySchedule=function(t){this.schedule_url="http://data.nba.com/json/cms/noseason/scoreboard/"+this.yyyymmdd(0)+"/games.json",this.resetSchedule()},NBA.prototype.yesterdaySchedule=function(t){this.schedule_url="http://data.nba.com/json/cms/noseason/scoreboard/"+this.yyyymmdd(-1)+"/games.json",this.resetSchedule()};